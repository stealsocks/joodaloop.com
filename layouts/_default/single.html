{{ define "main" }}

  <!-- <main id="swup" class="transition-fade"> -->

<!-- <span> <a href="#" > music </a> 
    <a href="#" class=hide> notebook </a> 
    
    

    <a href="#"> bad advice </a>  
    <a href="#" class=hide> colophon </a> 
  </span>  -->


  <div class=leftmost id=leftmost style="-webkit-overflow-scrolling: touch;">

    <div class=close-mobile-menu> <button onclick="toggleLeftMost()"> â•³ </button></div>

    <h1 id=page-title> <a href="/"> joodaloop </a> </h1>
    <ol class="toc-list" role="list">

          <li>
            <a href="/personal">
                      <span class="title bold">Personal<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                      class="visually-hidden">Page&nbsp;</span>i</span>
                          <span class=hidden> Me and my stuff.</span>

            </a>

               <a href="/bad-advice">
                    <span class="title bold">Bad Advice<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                    class="visually-hidden">Page&nbsp;</span>iii</span>
                          <span class=hidden> You should definitely not do all these things that I've done.</span>
               </a>

                 <a href="/essays">
                      <span class="title bold">Essays<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                      class="visually-hidden">Page&nbsp;</span>vii</span>
                          <span class=hidden> Long-form writing that I'm proud of.</span>
                 </a>

                <a href="/ideas">
                      <span class="title bold">Plans & Ideas<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                      class="visually-hidden">Page&nbsp;</span>xi</span>
                          <span class=hidden> Thought bubbles.</span>
                 </a>

        </li>
    </ol>
    
    <div class=section>

    <h2> Lists & Highlights </h2>

    <!-- <div class=leftmost-item> <a href="#"> Quotes </a> </div>
    <div class=leftmost-item> <a href="#"> Software I Like </a> </div> -->


    {{ range where .Site.Pages "Type" "list" }}
           <div class=leftmost-item> <a href="{{ .Permalink }}"> {{.Title}} </a> </div>
    {{ end }}

    </div>


    <div class=section>
    <h2> Useful </h2>

    {{ range where (where .Site.RegularPages "Type" "useful") "File.Dir" "useful/" }}
           <div class=leftmost-item> <a href="{{ .Permalink }}"> {{.Title}} </a> </div>
    {{ end }}

    </div>


    <div class=section>
    <h2> Notes </h2>

    {{ range where .Site.Pages "Type" "note" }}
           <div class=leftmost-item> <a href="{{ .Permalink }}"> {{.Title}} </a> </div>
    {{ end }}

    </div>


    <div class=section>
    <h2> Projects </h2>

    {{ range where .Site.Pages "Type" "project" }}
           <div class=leftmost-item> <a href="{{ .Permalink }}"> {{.Title}} </a> </div>
    {{ end }}


    </div>

     <ol class="toc-list" role="list">

          <li>     
                   
            <a href="/colophon">
                      <span class="title bold">Colophon<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                      class="visually-hidden">Page&nbsp;</span>xxi</span>
                          <span class=hidden> About this site.</span>

            </a>

            <a href="/">
                      <span class="title bold">Sitemap<span class="leaders" aria-hidden="true"></span></span> <span data-href="#Introduction" class="page"><span
                                      class="visually-hidden">Page&nbsp;</span>xxi</span>
                          <span class=hidden> Home page.</span>

            </a>

          </li>
    </ol>

  </div><div class=left id=left>
    <div class=holder id=holder>
    <div class="left-item subtitle"> <b><i> {{ .Description }} </i></b> </div>

    {{ if .Params.toc }}
    <aside>
        {{ .Page.TableOfContents }}
    </aside>
    {{ end }}

  </div>
  </div>

    

  <div class=right id=right>

    <div id=mobile-menu>

      <div id=title> <a href="/"> joodaloop </a> </div>
      <div id=buttons>
      <button onclick="toggleLeftMost()"> Menu </button>
    </div>
    </div>
           
      <main id=main>

        <h1>{{ .Title }}</h1>
        {{ .Content }}
      
      </main>
</div>
 <script>
    
  function closeLeft(){
    document.getElementById("left").classList.toggle("closed")
  }



  let sidebar = document.getElementById("leftmost");
  let scroll = localStorage.getItem("sidebar-scroll")

  if (scroll !== null) {
    sidebar.scrollTop = parseInt(scroll, 10);
    // console.log(sidebar.scrollTop)
  }

  window.addEventListener("beforeunload", () => {
    localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
  });

  window.addEventListener("pagehide", () => {
    localStorage.setItem("sidebar-scroll", sidebar.scrollTop);
  });

  // setInterval( () => { console.log(sidebar.scrollTop); } , 1000)


  function toggleLeftMost(){
    document.getElementById("leftmost").classList.toggle("visible")
    document.getElementById("right").classList.toggle("invisible")
  }


 //  const scroller = document.getElementById("right");
 //    console.log(scroller)


 //  scroller.addEventListener('mouseover', () => {
 //    console.log('scroll event fired!')
 // });

    </script>

<!-- <div class=distort>dgsgh</div> -->

 {{ end }}


